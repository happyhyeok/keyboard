<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‚¤ë³´ë“œ ëŒ€ëª¨í—˜: ëœë¤ í•™ìŠµ ğŸ²</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');

        body {
            font-family: 'Jua', sans-serif;
            background-color: #f0f4c3;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            width: 800px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* ì§„í–‰ë°” */
        .progress-container {
            width: 100%;
            background-color: #eee;
            border-radius: 20px;
            margin-bottom: 30px;
            height: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #8bc34a;
            width: 0%;
            transition: width 0.5s ease;
        }

        .stage-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .stage-content.active {
            display: block;
        }

        h1 {
            color: #558b2f;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .key-visual {
            font-size: 2.5rem;
            background: #2d3436;
            color: white;
            display: inline-block;
            padding: 15px 30px;
            border-radius: 15px;
            box-shadow: 0 6px 0 #000;
            margin: 20px 0;
        }

        .instruction {
            font-size: 1.3rem;
            background: #dcedc8;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            line-height: 1.6;
            border: 2px dashed #aed581;
        }

        .word-box {
            background-color: #fff;
            padding: 5px 15px;
            border-radius: 10px;
            color: #d84315;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .mission-box {
            font-size: 1.4rem;
            color: #e65100;
            margin-bottom: 15px;
            font-weight: bold;
        }

        textarea {
            width: 80%;
            height: 80px;
            font-size: 1.8rem;
            font-family: 'Jua', sans-serif;
            padding: 15px;
            border: 3px solid #ccc;
            border-radius: 15px;
            resize: none;
            outline: none;
            text-align: center;
            transition: border-color 0.3s;
        }

        textarea:focus {
            border-color: #8bc34a;
        }

        textarea.success {
            border-color: #2ecc71;
            background-color: #e8f8f5;
        }

        .feedback {
            margin-top: 20px;
            font-size: 1.5rem;
            height: 40px;
            font-weight: bold;
        }
        
        .feedback.correct { color: #2ecc71; }
        .feedback.wrong { color: #e74c3c; }
        .feedback.info { color: #3498db; }

        .next-btn {
            background-color: #8bc34a;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            font-family: 'Jua', sans-serif;
            cursor: pointer;
            box-shadow: 0 5px 0 #558b2f;
            margin-top: 20px;
            display: none;
            animation: bounce 1s infinite;
        }

        .next-btn:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        .reset-btn {
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 50px;
            font-family: 'Jua';
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
<a href="index.html" style="
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 10px 20px;
    background: #ffffff;
    color: #333;
    text-decoration: none;
    font-family: 'Jua', sans-serif;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 15px;
    border: 3px solid #333;
    box-shadow: 0 4px 0 rgba(0,0,0,0.2);
    z-index: 9999;
    cursor: pointer;
    transition: transform 0.1s;
" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
    ğŸ  ì²˜ìŒìœ¼ë¡œ
</a>
    <div class="container">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="stage-content active" id="stage0">
            <h1>ğŸš€ ëœë¤ í‚¤ë³´ë“œ ëŒ€ëª¨í—˜</h1>
            <p class="instruction">
                ì¹œêµ¬ë“¤ë§ˆë‹¤ ë‹¤ë¥¸ ë‹¨ì–´ê°€ ë‚˜ì™€ìš”!<br>
                í™”ë©´ì— ë‚˜ì˜¤ëŠ” ê¸€ìë¥¼ ì˜ ë³´ê³  ë”°ë¼ ì¨ë³´ì„¸ìš”.
            </p>
            <button class="next-btn" style="display: inline-block; animation: none;" onclick="startGame()">ì¶œë°œí•˜ê¸°! ğŸ‘‰</button>
        </div>

        <div class="stage-content" id="stage1">
            <h1>1ë‹¨ê³„: ì§€ìš°ê°œ (Backspace)</h1>
            <div class="key-visual">â† Backspace</div>
            <p class="instruction">
                ê¸€ìë¥¼ ì“°ë‹¤ê°€ í‹€ë¦¬ë©´ ì§€ì›Œì•¼ í•´ìš”.<br>
                <b>[ <span id="s1-full" class="word-box"></span> ]</b> ë¼ê³  ì¼ë‹¤ê°€, ë’¤ë¥¼ ì§€ì›Œì„œ <b>[ <span id="s1-part" class="word-box"></span> ]</b> ë§Œ ë‚¨ê¸°ì„¸ìš”.
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s1-mission"></span></div>
            <textarea id="input1"></textarea>
            <div class="feedback" id="feedback1">ì‹œì‘í•´ë³¼ê¹Œìš”?</div>
            <button class="next-btn" id="btn1" onclick="nextStage()">ë‹¤ìŒ ë‹¨ê³„ë¡œ! ğŸŒŸ</button>
        </div>

        <div class="stage-content" id="stage2">
            <h1>2ë‹¨ê³„: ì¤„ë°”ê¿ˆ (Enter)</h1>
            <div class="key-visual">â†µ Enter</div>
            <p class="instruction">
                ìœ—ì¤„ê³¼ ì•„ë«ì¤„ì„ ë‚˜ëˆ ì„œ ì¨ë´ìš”.
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s2-mission"></span></div>
            <textarea id="input2"></textarea>
            <div class="feedback" id="feedback2"></div>
            <button class="next-btn" id="btn2" onclick="nextStage()">ì„±ê³µ! ë‹¤ìŒìœ¼ë¡œ! ğŸš€</button>
        </div>

        <div class="stage-content" id="stage3">
            <h1>3ë‹¨ê³„: ë³€ì‹  í‚¤ (í•œ/ì˜)</h1>
            <div class="key-visual">í•œ/ì˜</div>
            <p class="instruction">
                ì˜ì–´ì™€ í•œê¸€ì„ ë²ˆê°ˆì•„ ê°€ë©° ì¨ë´ìš”.<br>
                í•œ/ì˜ í‚¤ë¥¼ ëˆŒëŸ¬ì„œ ì–¸ì–´ë¥¼ ë°”ê¿”ì£¼ì„¸ìš”!
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s3-mission"></span></div>
            <textarea id="input3"></textarea>
            <div class="feedback" id="feedback3"></div>
            <button class="next-btn" id="btn3" onclick="nextStage()">ì˜í–ˆì–´ìš”! ë‹¤ìŒ! ğŸ‡°ğŸ‡·ğŸ‡ºğŸ‡¸</button>
        </div>

        <div class="stage-content" id="stage4">
            <h1>4ë‹¨ê³„: Shift â‘  í•œê¸€ ìŒììŒ</h1>
            <div class="key-visual">â‡§ Shift + í•œê¸€</div>
            <p class="instruction">
                Shiftë¥¼ <b>ëˆ„ë¥¸ ì±„ë¡œ</b> ì…ë ¥í•˜ë©´ <b>[ ã…ƒ, ã…‰, ã„¸, ã„², ã…† ]</b> ì´ ë‚˜ì™€ìš”.
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s4-mission"></span></div>
            <textarea id="input4"></textarea>
            <div class="feedback" id="feedback4"></div>
            <button class="next-btn" id="btn4" onclick="nextStage()">ë©‹ì ¸ìš”! ë‹¤ìŒ! âœ¨</button>
        </div>

        <div class="stage-content" id="stage5">
            <h1>5ë‹¨ê³„: Shift â‘¡ ì˜ì–´ ëŒ€ë¬¸ì</h1>
            <div class="key-visual">â‡§ Shift + ì˜ì–´</div>
            <p class="instruction">
                ì˜ì–´ì˜ <b>ì²« ê¸€ìë§Œ ëŒ€ë¬¸ì</b>ë¡œ ì¨ë³´ì„¸ìš”.<br>
                Shiftë¥¼ ëˆ„ë¥¸ ì±„ë¡œ ì²« ê¸€ìë¥¼ ì¹˜ë©´ ë¼ìš”!
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s5-mission"></span></div>
            <textarea id="input5"></textarea>
            <div class="feedback" id="feedback5"></div>
            <button class="next-btn" id="btn5" onclick="nextStage()">ì˜í–ˆì–´ìš”! ë‹¤ìŒ! ğŸ” </button>
        </div>

        <div class="stage-content" id="stage6">
            <h1>6ë‹¨ê³„: Shift â‘¢ íŠ¹ìˆ˜ë¬¸ì</h1>
            <div class="key-visual">â‡§ Shift + ìˆ«ì</div>
            <p class="instruction">
                ìˆ«ì í‚¤ ìœ„ì— ìˆëŠ” <b>ê¸°í˜¸(!, @, ?)</b>ë¥¼ ì¨ë³¼ê¹Œìš”?<br>
                Shiftë¥¼ ê¾¹ ëˆ„ë¥´ê³  ìˆ«ìë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”.
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s6-mission"></span></div>
            <textarea id="input6"></textarea>
            <div class="feedback" id="feedback6"></div>
            <button class="next-btn" id="btn6" onclick="nextStage()">Shift ì •ë³µ ì™„ë£Œ! ğŸ‰</button>
        </div>

        <div class="stage-content" id="stage7">
            <h1>7ë‹¨ê³„: ëŒ€ì¥ í‚¤ (Caps Lock)</h1>
            <div class="key-visual">Caps Lock</div>
            <p class="instruction">
                ëª¨ë“  ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ ì“°ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•´ìš”.
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜: <span id="s7-mission"></span></div>
            <textarea id="input7"></textarea>
            <div class="feedback" id="feedback7"></div>
            <button class="next-btn" id="btn7" onclick="nextStage()">ë§ˆì§€ë§‰ ë„ì „ìœ¼ë¡œ! ğŸ”¥</button>
        </div>

        <div class="stage-content" id="stage8">
            <h1>ğŸ‘‘ ë§ˆì§€ë§‰ í™•ì¸ í•™ìŠµ</h1>
            <p class="instruction">
                ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ë‚´ìš©ì„ ì„ì–´ì„œ ì—°ìŠµí•´ë´ìš”!<br>
                (Shift, í•œ/ì˜, Enter ëª¨ë‘ ì‚¬ìš©)
            </p>
            <div class="mission-box">ğŸ¯ ë¯¸ì…˜:<br><br><span id="s8-mission" class="word-box" style="font-size:1.5rem; background:#eee; color:#333;"></span></div>
            <textarea id="input8"></textarea>
            <div class="feedback" id="feedback8"></div>
            <button class="next-btn" id="btn8" onclick="nextStage()">ì™„ë£Œ! ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ†</button>
        </div>

        <div class="stage-content" id="stage9">
            <h1 style="font-size: 4rem;">ğŸ† ëŒ€ë‹¨í•´ìš”!</h1>
            <p class="instruction">
                ì˜¤ëŠ˜ì˜ í‚¤ë³´ë“œ ì—°ìŠµ ë!<br>
                ë‹¤ì‹œ ì‹œì‘í•˜ë©´ <b>ìƒˆë¡œìš´ ë‹¨ì–´</b>ê°€ ë‚˜ì™€ìš”.
            </p>
            <button class="reset-btn" onclick="location.reload()">ìƒˆë¡œìš´ ë¬¸ì œë¡œ ë‹¤ì‹œ í•˜ê¸°</button>
        </div>

    </div>

    <script>
        // --- ğŸ² ëœë¤ ë‹¨ì–´ ë°ì´í„°ë² ì´ìŠ¤ ---
        const db = {
            stage1: [
                {full: "ì‚¬ê³¼", part: "ì‚¬"}, {full: "ê°€ì§€", part: "ê°€"}, {full: "í¬ë„", part: "í¬"},
                {full: "ë‚˜ë¹„", part: "ë‚˜"}, {full: "í•˜ë§ˆ", part: "í•˜"}, {full: "í•™êµ", part: "í•™"}
            ],
            stage2: [
                {top: "í•˜ëŠ˜", bottom: "ë°”ë‹¤"}, {top: "ì—„ë§ˆ", bottom: "ì•„ë¹ "}, 
                {top: "ì—¬ë¦„", bottom: "ê²¨ìš¸"}, {top: "ì‚¬ì", bottom: "í˜¸ë‘ì´"}
            ],
            stage3: [
                {en: "mom", ko: "ì—„ë§ˆ"}, {en: "love", ko: "ì‚¬ë‘"}, 
                {en: "ant", ko: "ê°œë¯¸"}, {en: "dog", ko: "ê°•ì•„ì§€"}
            ],
            stage4: [
                "í† ë¼", "ì½”ë¼ë¦¬", "ì§œì¥ë©´", "ë½€ë½€", "ë¨¸ë¦¬ë ", "ì•„ë¹ ", "ì“°ë ˆê¸°í†µ"
            ],
            stage5: [
                "Korea", "Seoul", "Banana", "Apple", "Milk", "Candy"
            ],
            stage6: [
                "ì•ˆë…•!", "ì‚¬ë‘í•´?", "ìµœê³ !", "ì •ë§?", "ì™€ìš°!", "1ë“±!"
            ],
            stage7: [
                "HAPPY", "LION", "TIGER", "GOOD", "HELLO", "PIZZA"
            ],
            stage8: [
                "í•™êµ\nGo!", "ì•ˆë…•\nHi!", "ì¹œêµ¬\nLove", "ì‚¬ë‘\nOk!"
            ]
        };

        // --- í˜„ì¬ ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ---
        let currentStage = 0; // 0ë‹¨ê³„(ì¶œë°œí•˜ê¸° í™”ë©´)ë¶€í„° ì‹œì‘
        const totalStages = 9;
        let currentMission = {};

        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜: ëœë¤ ë½‘ê¸° ---
        function pickRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // --- ê²Œì„ ì‹œì‘ (ì¶œë°œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰) ---
        function startGame() {
            // ëª¨ë“  ìŠ¤í…Œì´ì§€ ë¬¸ì œ ì„¸íŒ…
            setupStage1();
            setupStage2();
            setupStage3();
            setupStage4();
            setupStage5();
            setupStage6();
            setupStage7();
            setupStage8();

            // 1ë‹¨ê³„ë¡œ ì´ë™ (ì´ë•Œ Stage 0ì˜ ë‚´ìš©ì€ ì‚¬ë¼ì§)
            nextStage();
        }

        function updateProgress() {
            // Stage 1ë¶€í„° ê²Œì´ì§€ê°€ ì°¨ì˜¤ë¥´ë„ë¡ ì„¤ì •
            const percentage = ((currentStage - 1) / (totalStages - 2)) * 100;
            const width = percentage > 100 ? 100 : (percentage < 0 ? 0 : percentage);
            document.getElementById('progressBar').style.width = width + '%';
        }

        function nextStage() {
            // í˜„ì¬ ìŠ¤í…Œì´ì§€ ìˆ¨ê¹€ (Stage 0ì—ì„œ í˜¸ì¶œë˜ë©´ í—¤ë”ë„ ê°™ì´ ìˆ¨ê²¨ì§)
            document.getElementById(`stage${currentStage}`).classList.remove('active');
            
            currentStage++;
            
            // ë‹¤ìŒ ìŠ¤í…Œì´ì§€ í‘œì‹œ
            if (currentStage <= totalStages) {
                const nextStageEl = document.getElementById(`stage${currentStage}`);
                if (nextStageEl) {
                    nextStageEl.classList.add('active');
                    updateProgress();
                    const nextInput = document.getElementById(`input${currentStage}`);
                    if (nextInput) {
                        nextInput.value = '';
                        nextInput.focus();
                    }
                }
            }
        }

        // --- ğŸ¯ ìŠ¤í…Œì´ì§€ë³„ ëœë¤ ì„¸íŒ… ë° ê²€ì‚¬ ë¡œì§ ---

        function setupStage1() {
            const data = pickRandom(db.stage1);
            currentMission.s1 = data;
            
            document.getElementById('s1-full').innerText = data.full;
            document.getElementById('s1-part').innerText = data.part;
            document.getElementById('s1-mission').innerText = `'${data.full}' ì…ë ¥ í›„ â¡ ì§€ì›Œì„œ '${data.part}' ë§Œë“¤ê¸°`;
            document.getElementById('input1').placeholder = `ë¨¼ì € '${data.full}' ì´ë¼ê³  ì¨ë³´ì„¸ìš”.`;

            let hasTypedFull = false;
            const input = document.getElementById('input1');
            const feedback = document.getElementById('feedback1');
            const btn = document.getElementById('btn1');

            input.addEventListener('input', () => {
                const val = input.value;
                if (val.includes(data.full)) {
                    hasTypedFull = true;
                    feedback.textContent = `ë”©ë™ëŒ•! ğŸ”” ì´ì œ ë°±ìŠ¤í˜ì´ìŠ¤ë¡œ '${data.part}'ë§Œ ë‚¨ê²¨ë³´ì„¸ìš”.`;
                    feedback.className = "feedback info";
                    input.classList.remove('success');
                    btn.style.display = "none";
                }
                
                if (hasTypedFull && val.trim() === data.part) {
                    input.classList.add('success');
                    feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ì§€ìš°ê°œ ì„±ê³µ! â­•";
                    feedback.className = "feedback correct";
                    btn.style.display = "inline-block";
                } else if (!hasTypedFull) {
                    feedback.textContent = `ë¨¼ì € '${data.full}' ì´ë¼ê³  ëê¹Œì§€ ì¨ì£¼ì„¸ìš”.`;
                    feedback.className = "feedback wrong";
                    btn.style.display = "none";
                } else if (hasTypedFull && val.trim() !== data.part && !val.includes(data.full)) {
                    feedback.textContent = `ì•—, ë„ˆë¬´ ë§ì´ ì§€ì› ë‚˜ìš”? '${data.part}'ë§Œ ë‚¨ê²¨ì£¼ì„¸ìš”.`;
                    feedback.className = "feedback wrong";
                    btn.style.display = "none";
                }
            });
        }

        function setupStage2() {
            const data = pickRandom(db.stage2);
            document.getElementById('s2-mission').innerText = `ìœ—ì¤„: ${data.top} / ì•„ë«ì¤„: ${data.bottom}`;
            document.getElementById('input2').placeholder = `${data.top} (ì—”í„°) ${data.bottom}`;
            
            checkMission('input2', 'feedback2', 'btn2', (val) => {
                return val.includes(data.top) && val.includes(data.bottom) && val.includes('\n');
            });
        }

        function setupStage3() {
            const data = pickRandom(db.stage3);
            document.getElementById('s3-mission').innerText = `${data.en} ${data.ko}`;
            document.getElementById('input3').placeholder = `ì˜ì–´(${data.en}) ì“°ê³  í•œê¸€(${data.ko})`;

            checkMission('input3', 'feedback3', 'btn3', (val) => {
                return val.toLowerCase().includes(data.en) && val.includes(data.ko);
            });
        }

        function setupStage4() {
            const word = pickRandom(db.stage4);
            document.getElementById('s4-mission').innerText = word;
            document.getElementById('input4').placeholder = `ì—¬ê¸°ì— '${word}' ì…ë ¥`;

            checkMission('input4', 'feedback4', 'btn4', (val) => val.trim() === word);
        }

        function setupStage5() {
            const word = pickRandom(db.stage5);
            document.getElementById('s5-mission').innerText = word;
            document.getElementById('input5').placeholder = `Shift ëˆ„ë¥´ê³  ì²«ê¸€ìë§Œ ëŒ€ë¬¸ì`;

            checkMission('input5', 'feedback5', 'btn5', (val) => val.trim() === word);
        }

        function setupStage6() {
            const word = pickRandom(db.stage6);
            document.getElementById('s6-mission').innerText = word;
            document.getElementById('input6').placeholder = word;

            checkMission('input6', 'feedback6', 'btn6', (val) => val.trim() === word);
        }

        function setupStage7() {
            const word = pickRandom(db.stage7);
            document.getElementById('s7-mission').innerText = word;
            document.getElementById('input7').placeholder = "Caps Lock ì¼œê³  ì…ë ¥";

            checkMission('input7', 'feedback7', 'btn7', (val) => val === word);
        }

        function setupStage8() {
            const text = pickRandom(db.stage8);
            document.getElementById('s8-mission').innerText = text.replace('\n', ' (ì—”í„°) ');
            document.getElementById('input8').placeholder = text.replace('\n', ' (ì—”í„°) ');

            checkMission('input8', 'feedback8', 'btn8', (val) => {
                const parts = text.split('\n');
                return val.includes(parts[0]) && val.includes(parts[1]) && val.includes('\n');
            });
        }

        function checkMission(inputId, feedbackId, btnId, conditionFunc) {
            const input = document.getElementById(inputId);
            const feedback = document.getElementById(feedbackId);
            const btn = document.getElementById(btnId);

            input.addEventListener('input', () => {
                if (conditionFunc(input.value)) {
                    input.classList.add('success');
                    feedback.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ì°¸ ì˜í–ˆì–´ìš”! â­•";
                    feedback.className = "feedback correct";
                    btn.style.display = "inline-block";
                } else {
                    input.classList.remove('success');
                    feedback.textContent = "í™”ë©´ì— ë³´ì´ëŠ” ê¸€ìì™€ ë˜‘ê°™ì´ ì…ë ¥í•´ë³´ì„¸ìš”. ğŸ¤”";
                    feedback.className = "feedback wrong";
                    btn.style.display = "none";
                }
            });
        }

    </script>
</body>
</html>